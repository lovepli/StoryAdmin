> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŽŸæ–‡åœ°å€ [mp.weixin.qq.com](https://mp.weixin.qq.com/s/BwkOoHC02z3yDHE9rfgynA)

å°ä¼™ä¼´ä»¬æ™šä¸Šå¥½å‘€~

å¹²è´§å¯èƒ½ä¼šè¿Ÿåˆ°ï¼Œä½†æ˜¯ä¸èƒ½ç¼ºå¸­å‘€ï¼ðŸ˜„

å˜¿å˜¿ Â è¿™ç¯‡æ¥è®²è®²é” ðŸ”’ å•¦~

çœ‹å®Œä¸Šæ–‡çš„ `ConcurrentHashMap` æ˜¯ä¸æ˜¯å‘çŽ°æœ‰å¾ˆå¤šä¸ª é”å‘€ï¼Œè¿™ç¯‡å°±å¸¦å¤§å®¶ç¼•ä¸€ç¼•~ ðŸ˜

![](https://mmbiz.qpic.cn/mmbiz_gif/zIjiaGEEKdYEMtm8j5FMx1CYXNE6BRlUVUeuxllVguBFyBeoxdSC9yI5Sf1KA1VTGT7TUXOfE2jqBoXYC2IRiaPA/640?wx_fmt=gif)img

* * *

### Java ä¸­çš„é”

ä¸ºå•¥æ˜¯ Java ä¸­çš„é”å‘¢ï¼Œ å› ä¸º é”çš„ç§ç±» ä¹Ÿæœ‰å¾ˆå¤šçš„ï¼Œåƒæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„ **ã€ŒMySQLã€**ï¼Œå®ƒä¹Ÿæœ‰è‡ªå·±çš„ **ã€Œè¡¨é”ï¼Œè¡Œé”ï¼Œé—´éš™é”ã€** ... ... è¿˜æœ‰ **ã€ŒåŸºäºŽ redis çš„åˆ†å¸ƒå¼é”ã€** ï¼ˆ**ã€ŒRedLockâ€”â€”çº¢é”ã€**ï¼‰å‘€ï¼Œ**ã€Œzookeeper çš„åˆ†å¸ƒå¼é”ã€** ç­‰å„ç§å„æ ·çš„ðŸ”’~

åŸ‹ä¸ªå‘ðŸ•³ ~ ä»¥åŽå†™æ•°æ®åº“ä¸“é¢˜çš„æ—¶å€™å†™å†™ ðŸ˜

4ye æ€»ç»“äº†ä¸€ä»½æ€ç»´å¯¼å›¾ï¼Œå°ä¼™ä¼´ä»¬å¯ä»¥çœ‹çœ‹~

![](https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEMtm8j5FMx1CYXNE6BRlUV2icsogkw9gztNtnSmm4m5icmpUMCFtbVE5CuRHNObUpyfWqYDcpmB5bg/640?wx_fmt=png)image

### ä¹è§‚é”

è¯´åˆ°è¿™ä¸ªå°±ä¸å¾—ä¸æä¸‹ `JAVA` ä¸­çš„ `CAS` äº†ï¼Œå®ƒæ˜¯è¿™ç§æ€æƒ³çš„å…·ä½“å®žçŽ°~ï¼Œè¿˜è®°å¾—ä¸Šæ–‡ é¢‘ç¹å‡ºçŽ°çš„ `Unsafe` ç±»å—ï¼Œ`ConcurrentHashMap` å°±æ˜¯é€šè¿‡å®ƒåŽ»è°ƒç”¨è¿™ä¸ª `CAS` ï¼ˆ Compare And Swap / Set ï¼‰ï¼ŒåŽ»è®¾ç½®å€¼çš„ ðŸ˜‹

#### æ¦‚å¿µï¼š

è¯»ä¸åŠ é”ï¼Œæ›´æ–°æ•°æ®æœŸé—´ä¼šåŠ é”ï¼ˆä¿è¯åŽŸå­æ€§ï¼‰

#### è¯¦è§£ï¼š

**ã€Œè¯»æ•°æ®æ—¶ã€** ä¼šå¾ˆä¹è§‚çš„è®¤ä¸ºåˆ«çš„çº¿ç¨‹æ²¡æœ‰åœ¨ä¿®æ”¹æ•°æ®ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ã€‚

**ã€Œå†™æ•°æ®æ—¶ã€** ä¼šåˆ¤æ–­å½“å‰å€¼å’ŒæœŸæœ›å€¼ä¸€ä¸ä¸€æ ·ï¼Œä¸€æ ·çš„è¯ä¼šè¿›è¡Œä¿®æ”¹ï¼Œæ­¤æ—¶ä¿®æ”¹ä¼šåŠ é”ã€‚

ï¼ˆè¿™é‡Œè¿˜æœ‰äº›å¾ˆç¡¬æ ¸çš„ç‚¹ï¼Œæ¶‰åŠåˆ°ç¡¬ä»¶å±‚é¢çš„é”~ Â **ã€ŒåŸºäºŽ MESI åè®®æ»´ã€** Â åŽé¢å…·ä½“ä¸“é¢˜å†æ‰©å±•ä¸‹ï¼ðŸ˜ ï¼‰

#### å®žçŽ°æ–¹å¼ï¼š

CAS æœºåˆ¶ã€ç‰ˆæœ¬å·æœºåˆ¶ï¼Œæ—¶é—´æˆ³æœºåˆ¶

ä¸ºä»€ä¹ˆä¼šå¤šåŽé¢ä¸¤ç§æœºåˆ¶å‘¢ï¼Œå…¶å®žè¿™é‡Œæ˜¯ä¸ºäº†è§£å†³è¿™ä¸ª **ã€ŒABA é—®é¢˜ã€**

##### ABA é—®é¢˜

åœºæ™¯æ¨¡æ‹Ÿï¼ŒçŽ°åœ¨æœ‰ä¸‰æ¡çº¿ç¨‹

çº¿ç¨‹ 1 è¯»å–å˜é‡ aï¼Œæ­¤æ—¶ a=1

çº¿ç¨‹ 2 è¯»å–å˜é‡ aï¼Œæ­¤æ—¶ a=1, æ¯”è¾ƒåŽå°†å®ƒæ”¹ä¸º a=2

çº¿ç¨‹ 3 è¯»å–å˜é‡ aï¼Œæ­¤æ—¶ a=2, æ¯”è¾ƒåŽå°†å®ƒæ”¹ä¸º a=1

è¿™æ—¶çº¿ç¨‹ 1 å‘çŽ°å˜é‡ a è¿˜æ˜¯ 1 ï¼Œå’ŒåŽŸæ¥ä¸€æ ·ï¼Œå°±å°†å®ƒæ”¹æˆå…¶ä»–å€¼äº†

å¯ä»¥å‘çŽ°è¿™ä¸ªè¿‡ç¨‹ä¸­ çº¿ç¨‹ 1 åœ¨ä¿®æ”¹å€¼çš„æ—¶å€™ï¼Œçº¿ç¨‹ 2,3 å·²ç»ä¿®æ”¹è¿‡å˜é‡ a çš„å€¼äº†ï¼Œä½†æ˜¯å®ƒæ¯«ä¸çŸ¥æƒ…~

æ‰€ä»¥å‘¢ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±å¼•å…¥äº†è¿™ä¸ª**ã€Œç‰ˆæœ¬å·æœºåˆ¶ æˆ–è€… æ—¶é—´æˆ³æœºåˆ¶~ã€**

å…¶å®žå°±æ˜¯å¤šæ¯”è¾ƒä¸€ä¸ªå€¼ï¼Œæ¯”å¦‚ **ã€Œæ¯æ¬¡æ›´æ”¹æ—¶å†æ¯”è¾ƒä¸‹è¿™ä¸ªç‰ˆæœ¬å·æˆ–è€…æ—¶é—´æˆ³å¯¹ä¸å¯¹å¾—ä¸Š~ã€**

é¢ è¿™é‡Œæ—¢ç„¶åªè®² Java ï¼Œé‚£ä¹Ÿä¸æ‰¯è¿œå•¦~ Â å˜¿å˜¿ï¼Œä¸è¿‡é“ç†è¿˜æ˜¯é€šç”¨çš„ï¼

å°ä¼™ä¼´ä»¬å¯ä»¥å‚è€ƒä¸‹ è¿™ä¸ª **ã€ŒåŽŸå­ç±»ä¸­çš„ã€** `AtomicStampedReference` Â ï¼Œå®ƒå°±è§£å†³äº†è¿™ä¸ª **ã€ŒABA é—®é¢˜ã€**

### æ‚²è§‚é”

è¿™ä¸ªå°±å’Œä¹è§‚å®Œå…¨ç›¸åå•¦~ Â ä¸ç®¡è¯»æ“ä½œè¿˜æ˜¯å†™æ“ä½œï¼Œéƒ½æ‚²è§‚çš„è®¤ä¸ºä¼šè¢«åˆ«çš„çº¿ç¨‹æ”¹å˜ï¼Œæ‰€ä»¥ **ã€Œä¸ç®¡æ˜¯è¯»è¿˜æ˜¯å†™éƒ½ä¼š åŠ é”ã€**

#### æ¦‚å¿µï¼š

æ‚²è§‚çš„è®¤ä¸ºï¼Œè¯»å†™éƒ½è¦åŠ é”ï¼Œä¸ç„¶å€¼ä¼šè¢«å…¶ä»–çº¿ç¨‹æ”¹å˜~

#### å®žçŽ°æ–¹å¼ï¼š

**ã€Œsynchronizedã€** ï¼Œ**ã€ŒReentrantLockã€**

### å…¬å¹³é”

å…¬å¹³å˜›ï¼Œè¦è®²ç©¶å…ˆæ¥åŽåˆ° Â ðŸ˜„

#### æ¦‚å¿µï¼š

> â
>
> å¤šä¸ªçº¿ç¨‹æŒ‰ç…§ç”³è¯·é”çš„é¡ºåºæ¥èŽ·å–é”
>
> âž

**ã€ŒåŽŸç†ã€**ï¼šä¸»è¦ä¾èµ–äºŽç»´æŠ¤è¿™ä¸ªé”çš„ Â **ã€Œç­‰å¾…é˜Ÿåˆ—ã€**ï¼Œå½“é˜Ÿåˆ—ä¸ºç©ºæ—¶å°±ç›´æŽ¥å æœ‰é”, ä¸ä¸ºç©ºå°±åŠ å…¥åˆ° **ã€Œç­‰å¾…é˜Ÿåˆ—ã€** çš„æœ«å°¾ï¼Œç„¶åŽæŒ‰ç…§ **ã€ŒFIFOã€** çš„åŽŸåˆ™åŽ»èŽ·å–é”ã€‚

#### å®žçŽ°æ–¹å¼ï¼š

åˆ›å»º **ã€ŒReentrantLockã€** æ—¶ï¼Œæ˜¾ç¤ºæŒ‡å®š `new ReentrantLock(true)`

å…¶å®žæ˜¯é è¿™ä¸ª **ã€ŒAQSã€** æ¥å®žçŽ°å…¬å¹³å’Œéžå…¬å¹³çš„ï¼Œè¿™é‡Œä¹ŸåŸ‹ä¸ªå‘ðŸ•³ åŽé¢ä¼šè¯¦è§£è¿™ä¸ªä¸“é¢˜çš„ðŸ˜‹

![](https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEMtm8j5FMx1CYXNE6BRlUVnoMBJTZ1Z81ibarBvtuKwMavbYVLYsGph4ATryK1MObuSficCdSdIZ7A/640?wx_fmt=png)image

### éžå…¬å¹³é”

è¿™ä¸ªå°±ä¸å’Œä½ è®²å…ˆæ¥åŽåˆ°äº† Â ðŸ˜„

#### æ¦‚å¿µï¼š

> â
>
> å¤šä¸ªçº¿ç¨‹ ä¸æŒ‰ç…§å…ˆåˆ°å…ˆå¾—çš„æ–¹å¼åŽ»èŽ·å–é”ï¼Œ æœ‰å¯èƒ½åŽç”³è¯·çš„çº¿ç¨‹ä¼šå…ˆå¾—åˆ°é”~
>
> âž

**ã€ŒåŽŸç†ã€**ï¼šéžå…¬å¹³é”ä¼šå°è¯•èŽ·å–é”ï¼Œå¤±è´¥çš„è¯ä¼šåŠ å…¥åˆ° **ã€Œç­‰å¾…é˜Ÿåˆ—ã€** çš„æœ«å°¾ï¼Œç„¶åŽæŒ‰ç…§ **ã€ŒFIFOã€** çš„åŽŸåˆ™åŽ»èŽ·å–é” ï¼Œå˜æˆå…¬å¹³é”çš„æ–¹å¼~

#### å®žçŽ°æ–¹å¼ï¼š

åˆ›å»º `ReentrantLock` æ—¶ï¼Œæ˜¾ç¤ºæŒ‡å®š `new ReentrantLock(false)` Â æˆ–è€…ä½¿ç”¨é»˜è®¤çš„æ–¹å¼ `new ReentrantLock();`

![](https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEMtm8j5FMx1CYXNE6BRlUVtKNS8hczLyXoPwl7AGve0LpdlkIPstEhciarrdJCajEdRtIElCGBiazw/640?wx_fmt=png)image

è¿˜æœ‰ `synchronized` è¿™ä¸ªå…³é”®å­—ä¹Ÿæ˜¯éžå…¬å¹³çš„

### ç‹¬äº«é” (ç‹¬å é”)

ç‹¬è‡ªå æœ‰é”ï¼Œä¸å’Œå…¶ä»–çº¿ç¨‹å…±äº«~ ðŸ˜„ Â  å’Œ äº’æ–¥é”ï¼ŒæŽ’ä»–é”ï¼Œæ‚²è§‚é” åŒä¹‰

#### æ¦‚å¿µï¼š

> â
>
> åªå…è®¸ä¸€æ¡çº¿ç¨‹å æœ‰è¯¥é”
>
> âž

#### å®žçŽ°æ–¹å¼ï¼š

`synchronized` ï¼Œ`ReentrantLock` è¿˜æœ‰ `ReentrantReadWriteLock` Â ä¸­ çš„ **ã€Œå†™é”ã€**

### å…±äº«é”

å¯ä»¥å’Œå…¶ä»–çº¿ç¨‹å…±äº«è¯¥é”~ ðŸ˜„ Â  å’Œ ä¹è§‚é”ï¼Œè¯»å†™é” åŒä¹‰

#### æ¦‚å¿µï¼š

> â
>
> é”å¯è¢«å¤šä¸ªçº¿ç¨‹æ‰€æŒæœ‰
>
> âž

#### å®žçŽ°æ–¹å¼ï¼š

`ReentrantReadWriteLock` ï¼Œ`ReadWriteLock` Â è¿™ä¸¤ä¸ªä¸­çš„ **ã€Œè¯»é”ã€**

### äº’æ–¥é” (åŒæ­¥é”)

å¯ä»¥ç†è§£ä¸ºç‹¬å é”çš„å…·ä½“å®žçŽ°~ðŸ˜„

#### æ¦‚å¿µï¼š

> â
>
> è¡¨ç¤ºè¯¥èµ„æºåªèƒ½è¢«ä¸€æ¡çº¿ç¨‹è®¿é—®ï¼Œä¸èƒ½è¢«å…¶ä»–è®¿é—®
>
> âž

#### å®žçŽ°æ–¹å¼ï¼š

`synchronized` ï¼Œ`ReentrantLock`

### è¯»å†™é”

é¡¾åæ€ä¹‰~ æœ‰è¯»é”å’Œå†™é” ðŸ˜„

*   è¯»è¯»ä¸äº’æ–¥

*   è¯»å†™äº’æ–¥

*   å†™å†™äº’æ–¥


#### æ¦‚å¿µï¼š

> â
>
> è¡¨ç¤ºè¯¥èµ„æºå…è®¸ **ã€Œå¤šæ¡æŒæœ‰è¯»é”çš„çº¿ç¨‹å…±åŒè®¿é—®ï¼Œä½†æ˜¯åªå…è®¸ä¸€æ¡æŒæœ‰å†™é”çš„çº¿ç¨‹ç‹¬å ã€**
>
> âž

#### å®žçŽ°æ–¹å¼ï¼š

`ReentrantReadWriteLock` ï¼Œ`ReadWriteLock`

è¿™é‡Œè¿˜æ¶‰åŠåˆ°**ã€Œé”çš„é™çº§ã€**ï¼Œè¿˜æœ‰**ã€Œå¯é‡å…¥ã€**ç­‰ä¸€äº›æœ‰æ„æ€çš„ç‚¹~ ï¼ŒåŸ‹ä¸ªå‘ðŸ•³ Â åŽé¢ä¹Ÿä¼šå†™åˆ°çš„ðŸ˜‹

### å¯é‡å…¥é” (é€’å½’é”)

ä»€ä¹ˆæ˜¯å¯é‡å…¥å‘¢~ Â ðŸ˜„

#### æ¦‚å¿µï¼š

> â
>
> å½“ä¸€ä¸ªçº¿ç¨‹æŒæœ‰æŸä¸ªé”æ—¶ï¼Œ**ã€Œå¯ä»¥å†æ¬¡èŽ·å–è¯¥é”è€Œä¸ä¼šå¯¼è‡´æ­»é”æˆ–è€…é˜»å¡žã€**
>
> âž

#### ç‰¹ç‚¹ï¼š

**ã€ŒèŽ·å– n æ¬¡ é” ï¼Œä¹Ÿè¦é‡Šæ”¾ n æ¬¡é”ã€**

#### å®žçŽ°æ–¹å¼ï¼š

`synchronized` ï¼Œ`ReentrantLock`

### åˆ†æ®µé”

è¿™ä¸ªä¸»è¦æ˜¯ **ã€ŒJdk1.7ã€** ç‰ˆæœ¬ çš„ `CurrentHashMap` Â  ðŸ˜„

#### æ¦‚å¿µï¼š

ç®€å•å›žå¿†ä¸‹~

> â
>
> `CurrentHashMap` Â  ä¸­ çš„ Â `Segment` æ•°ç»„ ï¼Œput æ“ä½œæ—¶ä¼šè°ƒç”¨ `ReentrantLock` Â  çš„ lock æ–¹æ³•ï¼Œé”ä½è¯¥ `Segment`
>
> âž

#### å®žçŽ°æ–¹å¼ï¼š

`synchronized` ï¼Œ`ReentrantLock`

### è‡ªæ—‹é”

å“ˆå“ˆ çœ‹äº†ä¸Šæ–‡ä¹‹åŽæ˜¯ä¸æ˜¯è§‰å¾—è¿™ä¸ªä¹Ÿç‰¹çœ¼ç†Ÿå‘€~ Â ðŸ˜„

å°ä¼™ä¼´ä»¬å¯ä»¥å‚çœ‹ä¸‹ `CurrentHashMap` Â  Â  ä¸­æºç å¯¹è¿™å—çš„å®žçŽ° ï¼Œå¦‚ `put` æºç 

#### æ¦‚å¿µï¼š

> â
>
> è®©çº¿ç¨‹ä¸æ–­åœ°å¾ªçŽ¯ï¼ŒåŽ»å°è¯•èŽ·å–é”
>
> âž

#### å®žçŽ°æ–¹å¼ï¼š

`CAS`

è¿™é‡Œå…¶å®žæœ‰å¾ˆå¤šå¯ä»¥æ‰©å±•çš„ï¼Œé™¤äº†å®ƒçš„ä¼˜ç¼ºç‚¹ä¹‹å¤–ï¼Œè¿˜æœ‰ Â **ã€Œè‡ªé€‚åº”è‡ªæ—‹ã€** Â è¿™ä¸ªå’Œ **ã€Œè™šæ‹Ÿæœºã€** ç›¸å…³çš„ ï¼ŒåŸ‹ä¸ªå‘ðŸ•³ ðŸ˜‹

### æ­»é”

**ã€Œæƒ…æ™¯æ¨¡æ‹Ÿã€**

çº¿ç¨‹ 1 æ‹¥æœ‰ èµ„æº A çš„é”ï¼Œçº¿ç¨‹ 2 æ‹¥æœ‰ èµ„æº B çš„é”ï¼Œä½†æ˜¯çº¿ç¨‹ 1 åœ¨æŒæœ‰ A é”çš„æƒ…å†µä¸‹ï¼Œè¿˜æƒ³æ‹¥æœ‰ B é”ã€‚åŒç† çº¿ç¨‹ 2 åœ¨æŒæœ‰ B é”çš„æƒ…å†µä¸‹ï¼Œè¿˜æƒ³æ‹¥æœ‰ A é”ã€‚ä»–ä»¬ä¸¤å°±è¿™æ ·åƒµæŒç€ï¼Œäº’ç›¸ç­‰å¾…å¯¹æ–¹é‡Šæ”¾é”ðŸ”’

#### æ¦‚å¿µï¼š

> â
>
> æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºŽç«žäº‰èµ„æºæˆ–è€…ç”±äºŽå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡žçš„çŽ°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æŽ¨è¿›ä¸‹åŽ»ã€‚æ­¤æ—¶ç§°ç³»ç»Ÿå¤„äºŽæ­»é”çŠ¶æ€æˆ–ç³»ç»Ÿäº§ç”Ÿäº†æ­»é”ï¼Œè¿™äº›æ°¸è¿œåœ¨äº’ç›¸ç­‰å¾…çš„è¿›ç¨‹ç§°ä¸ºæ­»é”è¿›ç¨‹ã€‚
>
> âž

### é”å‡çº§

**ã€Œæ— é” -> åå‘é” -> è½»é‡çº§é” -> é‡é‡çº§é”ã€**

è¿™é‡Œæ¶‰åŠåˆ° **ã€Œé”ä¼˜åŒ–æŠ€æœ¯ã€** Â ï¼ŒåŽé¢å’Œ **ã€Œé”ç²—åŒ–ã€**ï¼Œ**ã€Œé”è§£é™¤ã€** ç­‰ä½œä¸ºä¸€ä¸ªä¸“é¢˜å†™å†™âœ

![](https://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYEMtm8j5FMx1CYXNE6BRlUVTcibxlVRLBSdiaIADWM32J3fdEePDaiaJLd5wicnOdiasJh71qxBLsIGmyQ/640?wx_fmt=jpeg)img

ðŸ‘‰ åšäº†æ€ç»´å¯¼å›¾åŽå‘çŽ°è¿™é‡Œæœ‰è¿™ä¹ˆå¤šä¸“é¢˜å¾—ç¼•ä¸€ç¼•çš„ o((>Ï‰<))o

åªèƒ½å†åŠ æŠŠåŠ²å•¦ï¼

ä¸‹æœŸè§å•¦å„ä½ï¼**ðŸ˜**

![](https://mmbiz.qpic.cn/mmbiz_gif/Ljib4So7yuWh4ovyZcbx0cI6TPupJGxbkmbELQnfQvMbZpicsQuVOoa7PvaUXCNFnKLsl0HFEBSa4WYOJFPcfXrA/640?wx_fmt=gif)

**è°¢è°¢å¯çˆ±åˆå¸…æ°”çš„å¤§ä½¬ä»¬çš„è§‚çœ‹ï¼ç¥æ‚¨ å¤©å¤©å¼€å¿ƒï¼**ðŸ˜„

**æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼æ‚¨çš„æ¯ä¸ªå…³æ³¨ï¼Œéƒ½æ˜¯åšä¸»** **è‚è‚è‚****çš„åŠ¨åŠ› ðŸ˜**

![](https://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYF2db3KHM5ZAyibV3Idbmia6ZHOaDNaD0PDAIvfKVheD9AGw2OjAjYbr9MNibDZa0asM3HYUjG6qzRoQ/640?wx_fmt=jpeg)

ç‚¹ä¸ª â€œåœ¨çœ‹â€ è¡¨ç¤ºæœ•

[

![](https://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYEHESZlrbz2fm9z1oQUenkNHeZiaJNAV6FxmibBpCejzlP7z3DgOudJ9pfjnb9iaFGZStlHeG3Sd3RAQ/640?wx_fmt=jpeg)

ç»ˆäºŽæ¥åˆ° ConcurrentHashMap äº†~







](http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&mid=2247486450&idx=1&sn=0cb3394a90400dbb0c3542f097493e69&chksm=ce0716b4f9709fa2aabab63b2f535b28479dd219ea4b7d923a39e0889d50369f8c96ba0cd894&scene=21#wechat_redirect)



[

![](https://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYGbsKjF97ojmPOjahbybwsj8KY3fTy4q7LQ2u2FqJkIRwIpQl2n9KWcPI36ibF8ia1tf81whYXAcwdQ/640?wx_fmt=jpeg)

fail-safe å’Œ fail-fast ç¡¬æ ¸è§£æžï¼Œè®©ä½ å’Œé¢è¯•å®˜å¤šèŠååˆ†é’Ÿï¼







](http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&mid=2247486318&idx=1&sn=d7769eb74261f9d5c8d2adc0b31a5ce0&chksm=ce071628f9709f3e334da1f96bc9469f615505c9ff907ccdbf00adb420cb80715b6f0fd28a09&scene=21#wechat_redirect)



[

![](https://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYEyEggwEW59icTrhaaur0gLAbwoM53RxJelyYv7dx8l73PSML5D7a0VFHuWRickibZKb6Egtjd5oI2mQ/640?wx_fmt=jpeg)

ä¸€æ–‡å¸¦ä½ äº†è§£ TreeMap ï¼ŒLinkedHashMap çš„ä¸»è¦ç‰¹ç‚¹







](http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&mid=2247485984&idx=1&sn=dc3d8ee90fd2169d29015790773f01f6&chksm=ce071766f9709e7068e05338ff2fa51942f86488a214896bf765d13fe418cf776b4403ec6c8f&scene=21#wechat_redirect)



[

![](https://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYFviclNyvhERFbt4t69W1Zopp0LY1Nw6jTkuricyibtkFJ4mQMfPA40ywG3ectnAru0zEaST9gliaU7Og/640?wx_fmt=jpeg)

é¢è¯•ï¼Œ HashMapï¼Œçœ‹ï¼Ÿ







](http://mp.weixin.qq.com/s?__biz=Mzg2MjUzODc5Mw==&mid=2247485816&idx=1&sn=835a92e16387bc65c560557ecab39604&chksm=ce07143ef9709d28b9c28c585fff4aa4621573b1375633e05a9e0b71455178b727fdc2c9413c&scene=21#wechat_redirect)