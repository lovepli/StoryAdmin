(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2e87"],{"/umX":function(e,t,a){"use strict";t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a("9dlP"));t.default=function(e,t,a){return t in e?(0,n.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},"1XJC":function(e,t,a){},EPQV:function(e,t,a){},GzJC:function(e,t,a){},Jf5y:function(e,t,a){"use strict";var n=a("EPQV");a.n(n).a},QbPm:function(e,t,a){"use strict";a.r(t);var n,l=a("/umX"),i=a.n(l),o=a("cLjf"),s=a.n(o),r=a("hDQ3"),c=a.n(r),u=a("omC7"),d=a.n(u),h={name:"NewCode",filters:{},props:{selectDate:String,tableId:String},data:function(){return{tableData:[],multipleSelection:[],queryInfo:{dateSelect:"",pageNumber:1,pageSize:10},total:0,isLoading:!1,showPagination:!1,drawRates:{showEdit:[],showBtn:[],editIndex:"",editData:""}}},watch:{},mounted:function(){this.getTableList()},created:function(){},methods:(n={sortName:function(){},handleSelectionChange:function(e){this.multipleSelection=e,console.log(this.multipleSelection,"this.multipleSelection")},handleDelete:function(e,t,a){console.log("删除数据！"),console.log(a.id),console.log(a),console.log(t,e)},handleDetail:function(e,t){},goBack:function(){},save:function(){},addData:function(){var e={id:"",currencyNumber:"",currencyName:"",uploadDate:""};this.tableData.push(e),this.handleEdit(this.tableData.length-1,e)},handleEdit:function(e,t){this.handleUpdate(this.drawRates.editIndex,this.drawRates.editData),this.drawRates.editIndex=e;var a=JSON.parse(d()(t));this.drawRates.editData=a,this.drawRates.showEdit[e]=!0,this.drawRates.showBtn[e]=!0,this.$set(this.drawRates.showEdit,e,!0),this.$set(this.drawRates.showBtn,e,!0)},handleCancle:function(e,t){this.drawRates.showEdit[e]=!1,this.drawRates.showBtn[e]=!1,this.$set(this.drawRates.showEdit,e,!1),this.$set(this.drawRates.showBtn,e,!1),this.tableData[e]=this.drawRates.editData,this.drawRates.editData=""},handleUpdate:function(e,t){this.drawRates.showEdit[e]=!1,this.drawRates.showBtn[e]=!1,this.$set(this.drawRates.showEdit,e,!1),this.$set(this.drawRates.showBtn,e,!1);var a=JSON.parse(d()(t));this.drawRates.editData=a}},i()(n,"handleDelete",function(e,t){var a=this;this.$confirm("此操作将永久删除该数据，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.tableData.splice(e,1),a.$message({type:"success",message:"删除成功"})}).catch(function(){a.$message({type:"info",message:"已取消"})})}),i()(n,"handleCopy",function(e,t){this.tableData.splice(e,0,JSON.parse(d()(t)))}),i()(n,"addAll",function(){var e=this;if(0==this.multipleSelection.length){this.tableData.push({id:"",currencyNumber:"",currencyName:"",uploadDate:""})}else this.multipleSelection.forEach(function(t,a){e.tableData.splice(a,0,JSON.parse(d()(t)))})}),i()(n,"deleteAll",function(){for(var e=this,t=0;t<this.tableData.length;t++){this.tableData[t].id=t}0==this.multipleSelection.length&&this.$message.error("请至少选择一项！"),this.multipleSelection.forEach(function(t){e.tableData.forEach(function(a,n){t.id==a.id&&e.tableData.splice(n,1)})})}),i()(n,"getTableList",function(){var e=this;return c()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("查询表格！"),e.isLoading=!0,e.queryInfo.dateSelect=e.selectDate,e.tableData=[{id:"001",currencyNumber:"1",currencyName:"机构名称1",uploadDate:"2021-05-12"},{id:"002",currencyNumber:"2",currencyName:"机构名称2",uploadDate:"2021-05-12"}],e.total=2,e.isLoading=!1,e.showPagination=!(e.tableData.length<1);case 6:case"end":return t.stop()}},t,e)}))()}),i()(n,"handleSizeChange",function(e){this.queryInfo.pageSize=e,this.getTableList()}),i()(n,"handleCurrentChange",function(e){this.queryInfo.pageNumber=e,this.getTableList()}),n)},p=(a("Sonx"),a("ntfu"),a("ZrdR")),f=Object(p.a)(h,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],attrs:{data:e.tableData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40px"}}),e._v(" "),a("el-table-column",{attrs:{label:"序号",fixed:"",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.queryInfo.pageNumber-1)*e.queryInfo.pageSize+t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:!0,"sort-method":e.sortName,label:"币别名称","min-width":"30%"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,l=t.$index;return[e.drawRates.showEdit[l]?a("span",[a("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},model:{value:n.currencyName,callback:function(t){e.$set(n,"currencyName",t)},expression:"row.currencyName"}})],1):a("span",[e._v(e._s(n.currencyName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"default-sort":{prop:"currencyNumber"},sortable:!0,"sort-method":e.sortName,label:"币别号","min-width":"30%"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,l=t.$index;return[e.drawRates.showEdit[l]?a("span",[a("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},model:{value:n.currencyNumber,callback:function(t){e.$set(n,"currencyNumber",t)},expression:"row.currencyNumber"}})],1):a("span",[e._v(e._s(n.currencyNumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上传时间","min-width":"30%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.uploadDate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center","min-width":"40%"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,l=t.$index;return[e.drawRates.showBtn[l]?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){e.handleUpdate(l,n)}}},[e._v("\n          更新\n        ")]):e._e(),e._v(" "),e.drawRates.showBtn[l]?a("el-button",{attrs:{type:"button",size:"mini"},on:{click:function(t){e.handleCancle(l,n)}}},[e._v("\n          取消\n        ")]):e._e(),e._v(" "),e.drawRates.showBtn[l]?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.handleEdit(l,n)}}},[e._v("\n          编辑\n        ")]),e._v(" "),e.drawRates.showBtn[l]?e._e():a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(t){e.handleCopy(l,n)}}},[e._v("\n          复制\n        ")]),e._v(" "),e.drawRates.showBtn[l]?e._e():a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.handleDelete(l,n)}}},[e._v("\n          删除\n        ")])]}}])})],1),e._v(" "),e.showPagination?a("el-pagination",{attrs:{"current-page":e.queryInfo.pageNumber,"page-sizes":[10,20,50,100],"page-size":e.queryInfo.pageSize,total:e.total,layout:"total, sizes, prev,pager,next,jumper",background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("div",{staticClass:"btnGroup"},[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addData}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addAll}},[e._v("批量复制")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.deleteAll}},[e._v("批量删除")])],1)],1)],1)},[],!1,null,"54299a2e",null);f.options.__file="index.vue";var m=f.exports,b={name:"Erp",filters:{},components:{},props:{selectDate:String,tableId:String},data:function(){return{enumSet:{wechatFlowStatusEnum:this.$enums.wechatFlowStatusEnum},multipleSelection:[],tableForm:{tableData:[]},canUpload:!1,fileList:[[]],curRowIndex:null,queryInfo:{dateSelect:"",pageNumber:1,pageSize:10},total:0,isLoading:!1,showPagination:!1,isShowDailog:!1,submitForm:{lossRatio:""},drawRates:{showEdit:[],showBtn:[],showTooltip:[],editIndex:"",editData:""},lossRatioList:[],centManageDepList:[{value:"1",label:"归口管理部门1"},{value:"2",label:"归口管理部门2"}]}},watch:{},mounted:function(){this.init()},created:function(){},methods:{init:function(){var e=this;this.getTableList(),setTimeout(function(){e.editTable()},100)},handleDelete:function(e,t,a){console.log("删除数据！"),console.log(a.id),console.log(a),console.log(t,e)},handleDetail:function(e,t){},handleSelectionChange:function(e){this.multipleSelection=e,console.log(this.multipleSelection,"this.multipleSelection")},goBack:function(){},getTableList:function(){var e=this;return c()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("查询表格！"),e.isLoading=!0,e.queryInfo.dateSelect=e.selectDate,e.tableForm.tableData=[{id:"001",orgNumber:"1",orgName:"机构名称1",accountDate:"2021-04-12",accDate:"2021-05-12",centManageDep:"归口管理部门1",remarks:"备注1"},{id:"002",orgNumber:"2",orgName:"机构名称2",accountDate:"2021-04-12",accDate:"2021-05-12",centManageDep:"归口管理部门2",remarks:"备注2"}],e.total=2,e.isLoading=!1,e.showPagination=!(e.tableForm.tableData.length<1);case 6:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getTableList()},handleCurrentChange:function(e){this.queryInfo.pageNumber=e,this.getTableList()},validateAccDate:function(e,t,a){t?a():a(new Error("请输入计提日！"))},validateAccountDate:function(e,t,a){t?a():a(new Error("请输入挂账日期！"))},validateCentManageDep:function(e,t,a){t?a():a(new Error("请输入归口管理部门！"))},save:function(e){console.log(this.multipleSelection,"this.multipleSelection"),this.multipleSelection&&this.multipleSelection.map(function(e){return e.id});this.multipleSelection?this.multipleSelection:this.tableForm.tableData;this.$refs[e].validate(function(e){})},editTable:function(){var e=this;this.tableForm.tableData.map(function(t,a){t.isSet=!0,e.$set(e.tableForm.tableData,a,t),e.$set(e.drawRates.showTooltip,a,!0)})},showTooltip:function(e,t){t&&t.length>12?(this.drawRates.showTooltip[e]=!1,this.$set(this.drawRates.showTooltip,e,!1)):(this.drawRates.showTooltip[e]=!0,this.$set(this.drawRates.showTooltip,e,!0))},getRowKey:function(e){return e.id},bulkUpdate:function(){this.isShowDailog=!0},calclossDayChange:function(e,t){var a=this;return c()(s.a.mark(function n(){var l;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.accountDate&&t.accDate&&(t.accountDays=a.getDaysBetween(t),{subjectCode:t.subjectCode,currency:t.currency},a.drawRates.editIndex=e,l=JSON.parse(d()(t)),a.drawRates.editData=l,a.handleUpdate(a.drawRates.editIndex,a.drawRates.editData));case 1:case"end":return n.stop()}},n,a)}))()},getDaysBetween:function(e){return(Date.parse(e.accDate)-Date.parse(e.accountDate))/864e5},handleUpdate:function(e,t){var a=JSON.parse(d()(t));this.drawRates.editData=a},changeLossRatio:function(){}}},w=(a("dlgA"),a("mqOo"),Object(p.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"tableForm",attrs:{model:e.tableForm}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],attrs:{data:e.tableForm.tableData,"row-key":e.getRowKey,"header-cell-style":{background:"#eef1f6",color:"#606266",fontweight:600},border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40px"}}),e._v(" "),a("el-table-column",{attrs:{label:"序号",fixed:"",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.queryInfo.pageNumber-1)*e.queryInfo.pageSize+t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"机构号",prop:"orgNumber",fixed:"",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"机构名称",prop:"orgName","show-overflow-tooltip":"",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"归口管理部门",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,l=t.$index;return[e.drawRates.showEdit[l]||n.isSet?a("span",[a("el-tooltip",{attrs:{disabled:e.drawRates.showToolTip[l],content:n.centManageDep,effect:"dark",placement:"top"}},[a("el-input",{staticStyle:{width:"160px"},attrs:{size:"mini",placeholder:"请输入内容"},on:{input:function(t){e.showToolTip(l,n.centManageDep)}},model:{value:n.centManageDep,callback:function(t){e.$set(n,"centManageDep",t)},expression:"row.centManageDep"}})],1)],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"流程状态",prop:"flowStatus",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.enumSet.wechatFlowStatusEnum.getLabelByValue(t.row.flowStatus)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center","min-width":"10%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"margin-left":"0px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){e.handleDelete(t.$index,e.tableForm.tableData,t.row)}}},[e._v("\n              删除\n            ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"0px"},attrs:{type:"info",size:"mini"},on:{click:function(a){e.handleDetail(t.$index,e.tableForm.tableData)}}},[e._v("\n              详情\n            ")])]}}])})],1)],1),e._v(" "),e.showPagination?a("el-pagination",{attrs:{"current-page":e.queryInfo.pageNumber,"page-sizes":[10,20,50,100],"page-size":e.queryInfo.pageSize,total:e.total,layout:"total, sizes, prev,pager,next,jumper",background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("div",{staticClass:"btnGroup"},[a("el-row",[a("el-button",{attrs:{size:"small"},on:{click:e.goBack}},[e._v("返回")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.editTable}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.bulkUpdate}},[e._v("批量更新")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.save("tableForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.isShowDailog,title:"批量更新"},on:{"update:visible":function(t){e.isShowDailog=t}}},[a("el-form",{attrs:{model:e.submitForm}},[a("el-form-item",{attrs:{label:"资产减值比率","label-width":"120"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{"auto-complete":"off"},model:{value:e.submitForm.lossRatio,callback:function(t){e.$set(e.submitForm,"lossRatio",t)},expression:"submitForm.lossRatio"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isShowDailog=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.changeLossRatio}},[e._v("确定")])],1)],1)],1)],1)},[],!1,null,"379fb6a6",null));w.options.__file="index.vue";var g={name:"editTableIndex",components:{newCode:m,erp:w.exports},filters:{},data:function(){return{selectDate:"",limitdate:"",showTable:!1,showTable1:!1,showTable2:!1,tableId:"",tableName:"",netSiteNumber:"",netList:[{value:"1",label:"网点1"},{value:"2",label:"网点2"}],tablelList:[{value:"1",label:"新一代表"},{value:"2",label:"erp表"}],num:0}},watch:{},created:function(){},methods:{chageDate:function(e){this.selectDate=e},selectChange:function(e){var t=this;this.tablelList.find(function(a){if(a.value==e)return t.tableName=a.label})},selectNetSite:function(e){this.netSiteNumber="all"===e?"全部":e},search:function(){this.showTableList()},showTableList:function(){this.num+=1,"1"===this.tableId?(this.showTable1=!0,this.showTable2=!1):(this.showTable1=!1,this.showTable2=!0)}}},v=(a("Jf5y"),Object(p.a)(g,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"数据表名称：",placeholder:"请选择"}},[a("el-select",{attrs:{filterable:"",placeholder:"请输入",clearable:""},on:{change:e.selectChange},model:{value:e.tableId,callback:function(t){e.tableId=t},expression:"tableId"}},e._l(e.tablelList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"时间搜索范围："}},[a("el-date-picker",{attrs:{type:"date","range-separator":"至",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:e.chageDate},model:{value:e.limitdate,callback:function(t){e.limitdate=t},expression:"limitdate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机构号：",placeholder:"请选择"}},[a("el-select",{attrs:{filterable:"",placeholder:"请输入",clearable:""},on:{change:e.selectNetSite},model:{value:e.netSiteNumber,callback:function(t){e.netSiteNumber=t},expression:"netSiteNumber"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),e._v(" "),e._l(e.netList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1)],1),e._v(" "),e.showTable1?a("newCode",{key:e.num,attrs:{selectDate:e.selectDate,tableId:e.tableId}}):e._e(),e._v(" "),e.showTable2?a("erp",{key:e.num,attrs:{selectDate:e.selectDate,tableId:e.tableId}}):e._e()],1)},[],!1,null,null,null));v.options.__file="editTableIndex.vue";t.default=v.exports},QePQ:function(e,t,a){},Sonx:function(e,t,a){"use strict";var n=a("QePQ");a.n(n).a},dlgA:function(e,t,a){"use strict";var n=a("1XJC");a.n(n).a},lndW:function(e,t,a){},mqOo:function(e,t,a){"use strict";var n=a("lndW");a.n(n).a},ntfu:function(e,t,a){"use strict";var n=a("GzJC");a.n(n).a}}]);