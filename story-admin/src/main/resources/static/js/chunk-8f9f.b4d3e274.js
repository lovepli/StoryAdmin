(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8f9f"],{"4M09":function(t,i,o){t.exports=o.p+"static/img/rotate5.2b5a43d.jpg"},nvVH:function(t,i,o){"use strict";o.r(i);o("t/WP");var n=o("ozZp"),e=o.n(n);function a(t){if(t.id){this.imgUrl=t.imgUrl,this.width=t.width||400,this.height=t.height||400,this.miniWidth=t.miniWidth||40,this.miniHeight=t.miniHeight||40,this.flatContent=t.flatContent||"翻转",this.rotate1Content=t.rotate1Content||"旋转",this.rotate2Content=t.rotate2Content||"旋转";var i=e()(' <div class="imgobj-box">\n    <div class="imgobj-img-box">\n      <div class="imgobj-minibox imgobj-flat"></div>\n      <div class="imgobj-minibox imgobj-rotate"></div>\n      <div class="imgobj-minibox imgobj-rotate1"></div>\n      <img src="'+this.imgUrl+'" alt="" class="imgobj-img">\n    </div>\n  </div>');console.log(this.rotate2Content),e()("#"+t.id).addClass("imgobj-container-box"),e()("#"+t.id).append(i),e()("#"+t.id+" .imgobj-flat").html(this.flatContent),e()("#"+t.id+" .imgobj-rotate").html(this.rotate1Content),e()("#"+t.id+" .imgobj-rotate1").html(this.rotate2Content),e()(".imgobj-container-box .imgobj-box").css({width:this.width,height:this.height}),e()(".imgobj-container-box .imgobj-minibox").css({width:this.miniWidth,height:this.miniHeight,"line-height":this.miniHeight+"px"}),e()(".imgobj-container-box .imgobj-flat").css({right:-this.miniWidth/2,top:-this.miniHeight/2}),e()(".imgobj-container-box .imgobj-rotate").css({right:-this.miniWidth/2,bottom:-this.miniHeight/2}),e()(".imgobj-container-box .imgobj-rotate1").css({left:-this.miniWidth/2,bottom:-this.miniHeight/2}),this.pointA={X:e()("#"+t.id+" .imgobj-box").width()/2+e()("#"+t.id+" .imgobj-box").offset().left,Y:e()("#"+t.id+" .imgobj-box").height()/2+e()("#"+t.id+" .imgobj-box").offset().top},this.pointB={},this.pointC={},this.typeMouse=!1,this.moveMouse=!1,this.allA=0,this.count=0,this.mPointB={},this.flat=-1,this.init={count:0},this.oldTarget={target:null,angle:0},this.flatImg(),this.rotate(),this.move(),this.mouseup()}}a.prototype.flatImg=function(){var t=this;e()(".imgobj-container-box .imgobj-flat").click(function(){e()(".imgobj-container-box .imgobj-img").css("transform","scaleX("+t.flat+")"),t.flat=-t.flat})},a.prototype.rotate=function(){var t=this;e()(".imgobj-container-box .imgobj-rotate, .imgobj-container-box .imgobj-rotate1").on("mousedown",function(i){if(i.preventDefault(),i.stopPropagation(),t.oldTarget.target&&t.oldTarget.target!==i.currentTarget){var o=t.width/t.height,n=Math.round(180*Math.atan(o)/Math.PI);i.currentTarget===e()(".imgobj-container-box .imgobj-rotate")[0]?t.oldTarget.angle=2*n:t.oldTarget.angle=-2*n}else t.oldTarget.angle=0;t.typeMouse=!0,t.count<1&&(t.pointB.X=i.pageX,t.pointB.Y=i.pageY,t.init.count=0,t.oldTarget.target=i.currentTarget,t.count++),t.mPointB.flag&&(t.pointB.X+=t.mPointB.X,t.pointB.Y+=t.mPointB.Y,t.mPointB.flag=!1,t.init.count=0),console.log(t.pointA,t.pointB),e()(document).on("mousemove",function(i){if(i.preventDefault(),t.typeMouse){t.pointC.X=i.pageX,t.pointC.Y=i.pageY;var o=t.pointB.X-t.pointA.X,n=t.pointB.Y-t.pointA.Y,a=t.pointC.X-t.pointA.X,s=t.pointC.Y-t.pointA.Y,g={},m={};g.X=t.pointB.X-t.pointA.X,g.Y=t.pointB.Y-t.pointA.Y,m.X=t.pointC.X-t.pointA.X,m.Y=t.pointC.Y-t.pointA.Y;var h=g.X*m.Y-g.Y*m.X,r=Math.sqrt(Math.pow(t.pointA.X-t.pointB.X,2)+Math.pow(t.pointA.Y-t.pointB.Y,2)),p=Math.sqrt(Math.pow(t.pointA.X-t.pointC.X,2)+Math.pow(t.pointA.Y-t.pointC.Y,2)),b=Math.sqrt(Math.pow(t.pointB.X-t.pointC.X,2)+Math.pow(t.pointB.Y-t.pointC.Y,2)),c=(Math.pow(r,2)+Math.pow(p,2)-Math.pow(b,2))/(2*r*p),l=Math.round(180*Math.acos(c)/Math.PI);t.allA=h<0?-l:l,t.allA+=t.oldTarget.angle;var d=Math.sqrt(o*o+n*n),u=Math.sqrt(a*a+s*s)/d;e()(".imgobj-container-box .imgobj-img-box").css("transform","rotate("+t.allA+"deg) scale("+u+")")}})})},a.prototype.move=function(){var t=this;e()(".imgobj-container-box .imgobj-img").mousedown(function(i){t.moveMouse=!0,t.init.count<1&&(t.init={X:t.pointA.X,Y:t.pointA.Y,count:1});var o=i.pageX-e()(".imgobj-container-box .imgobj-box").position().left,n=i.pageY-e()(".imgobj-container-box .imgobj-box").position().top;e()(document).on("mousemove",function(i){if(i.preventDefault(),i.stopPropagation(),t.moveMouse){var a={};a.X=i.pageX-o,a.Y=i.pageY-n,e()(".imgobj-container-box .imgobj-box").css({left:a.X,top:a.Y}),t.pointA={X:e()(".imgobj-container-box .imgobj-box").width()/2+e()(".imgobj-container-box .imgobj-box").offset().left,Y:e()(".imgobj-container-box .imgobj-box").height()/2+e()(".imgobj-container-box .imgobj-box").offset().top},t.count>0&&(t.mPointB.X=t.pointA.X-t.init.X,t.mPointB.Y=t.pointA.Y-t.init.Y,t.mPointB.flag=!0)}})})},a.prototype.mouseup=function(){var t=this;e()(document).on("mouseup",function(){t.typeMouse=!1,t.moveMouse=!1})};var s=o("4M09"),g=o.n(s),m={mounted:function(){this.inintImage()},methods:{inintImage:function(){new a({id:"container",width:350,height:350,imgUrl:g.a,miniWidth:40,miniHeight:40,flatContent:"翻转",rotate1Content:"旋转",rotate2Content:'<i class="el-icon-refresh-right" style="font-size: 20px" />'})}}},h=o("ZrdR"),r=Object(h.a)(m,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("div",{staticClass:"box"},[i("div",{staticClass:"header"},[i("h1",[this._v("图形编辑(旋转,拉伸移动)")])]),this._v(" "),i("div",{attrs:{id:"container"}})])])}],!1,null,null,null);r.options.__file="imgobj.vue";i.default=r.exports},"t/WP":function(t,i,o){}}]);